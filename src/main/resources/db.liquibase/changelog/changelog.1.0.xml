<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.1.xsd">
    <!--<property name="now" value="sysdate" dbms="oracle"/>-->
    <property name="now" value="now()" dbms="mysql,h2"/>
    <property name="amount" value="decimal(20,2)"/>

    <changeSet id="oj20191108001" author="tba">
        <createTable tableName="test">
            <column name="id" type="bigint" remarks="主键ID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_test"/>
            </column>
            <column name="test_name" type="varchar(255)" remarks="测试名称"/>
            <column name="test_number" type="int" remarks="测试数字"/>
            <column name="test_date" type="timestamp" defaultValue="${now}" remarks="测试日期"/>
        </createTable>
    </changeSet>

    <changeSet id="oj20191112002" author="tba">
        <comment>初始化RBAC角色控制模型相关表</comment>
        <sqlFile path="classpath:db.liquibase/sql/rbac.sql" encoding="UTF-8"/>
    </changeSet>

    <changeSet id="oj20191113001" author="tba">
        <comment>创建公司表</comment>
        <createTable tableName="sys_company" remarks="系统公司">
            <column name="id" type="bigint" remarks="主键ID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_sys_company"/>
            </column>
            <column name="company_code" type="varchar(255)" remarks="公司编码">
                <constraints nullable="false"/>
            </column>
            <column name="company_name" type="varchar(255)" remarks="公司名称">
                <constraints nullable="false"/>
            </column>
            <column name="company_desc" type="varchar(2000)" remarks="公司简介"/>
            <column name="company_area" type="varchar(500)" remarks="公司地点"/>
        </createTable>
        <sql>
            insert into sys_company(id, company_code, company_name, company_desc, company_area) values(1, 'OrangeJuice', '橙汁公司', '专门介绍橙汁的公司', '中国')
        </sql>
    </changeSet>

    <changeSet id="oj20191114001" author="tba">
        <comment>创建文件表</comment>
        <createTable tableName="sys_file" remarks="系统文件">
            <column name="id" type="bigint" remarks="主键ID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_sys_file"/>
            </column>
            <column name="biz_id" type="bigint" remarks="业务ID">
                <constraints nullable="false"/>
            </column>
            <column name="biz_type" type="varchar(50)" remarks="业务类型">
                <constraints nullable="false"/>
            </column>
            <column name="file_name" type="varchar(255)" remarks="文件名"/>
            <column name="file_url" type="varchar(500)" remarks="文件访问路径"/>
            <column name="file_path" type="varchar(500)" remarks="文件存放路径"/>
            <column name="file_type" type="varchar(50)" remarks="文件类型(后缀)"/>
            <column name="created_date" type="timestamp" defaultValue="${now}" remarks="上传时间"/>
        </createTable>
    </changeSet>

    <changeSet id="oj20191115001" author="tba">
        <comment>创建产品表</comment>
        <createTable tableName="sys_goods" remarks="产品表">
            <column name="id" type="bigint" remarks="主键ID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_sys_goods"/>
            </column>
            <column name="goods_name" type="varchar(255)" remarks="产品名称">
                <constraints nullable="false"/>
            </column>
            <column name="goods_code" type="varchar(50)" remarks="产品编码">
                <constraints nullable="false"/>
            </column>
            <column name="goods_type_code" type="varchar(50)" remarks="产品类型">
                <constraints nullable="false"/>
            </column>
            <column name="goods_desc" type="varchar(1000)" remarks="产品描述"/>
            <column name="created_date" type="timestamp" defaultValue="${now}" remarks="创建时间"/>
        </createTable>
    </changeSet>

    <changeSet id="oj20191115002" author="tba">
        <comment>创建产品类型表</comment>
        <createTable tableName="sys_goods_type" remarks="产品分类表">
            <column name="id" type="bigint" remarks="主键ID">
                <constraints nullable="false" primaryKey="true" primaryKeyName="pk_sys_goods_type"/>
            </column>
            <column name="type_code" type="varchar(50)" remarks="分类编码">
                <constraints nullable="false"/>
            </column>
            <column name="type_name" type="varchar(255)" remarks="分类名称">
                <constraints nullable="false"/>
            </column>
            <column name="created_date" type="timestamp" defaultValue="${now}" remarks="创建时间"/>
        </createTable>
    </changeSet>

    <changeSet id="oj20191126001" author="tba">
        <addColumn tableName="sys_goods_type">
            <column name="enable" type="tinyint" defaultValue="1" remarks="是否启用"/>
        </addColumn>
    </changeSet>
</databaseChangeLog>